## 七层分别是哪七层

> 底层是为了上一层提供服务的
> 每一层做了哪些事

- 应用层: 用户最终看到的 **报文**
- 表示层: 表示数据的方式, 压缩
- 会话层: 建立会话和管理会话
  --------------上三层一般会合并到一层------------------
- 传输层: 传输数据，数据丢了怎么办？重传? 数据是否可靠完整，传输数据，传输数据段 **数据段** 增加端口号, 拆分数据段
- 网络层: 寻址(定位到对方) **数据包** 就是添加原地地址和目标地址， 增加 IP
- 数据链路层: 建立逻辑链接， 将数据进行封装传递过去(**帧** 1500 字节 MTU 最大的传输单元) 将数据中转传递给对方 增加 mac 地址
- 物理层: (物理设备: 主要是在计算机中如何传递二进制数据， 电线, 同轴电缆, 无线， 双绞线) 传输 0 和 1

## IP 地址和 MAC 地址

- ip 地址: iPV4 IPV6
- IPV4: 192.168.1.1(255,255,255,255) 子网划分, 所谓的 `ip 寻址`寻找的就是 `mac 地址`
- IPv6
- mac 地址: 通信地址是网卡与网卡的通信,(MAC 地址), 一般情况下 mac 地址是唯一的，通过 mac 地址来交换数据

### 局域网是如何通信的

- 物理层 中继器 **两口**(实现信号再生) 通过中继器实现信号方法，解决最大传输问题
- 物理层 集线器 **多口** 可以实现多台数据交互(通过广播的时候发送数据, 不会过滤敏感信息)
- 数据链路层 交换机(记录端口和 mac 地址的关系), 我们通信通过 ip 地址获取对方的 mac 地址，有了 mac 地址之后可以拿到对应的端口实现通信

## 外网（路由器）

- 可以把内网转为外网，路由器有两张网卡，一张网卡和局域网通信，一张负责和外网通信 (没有 wan 的路由器其实就可以看成一个交换机)
- 路由器网卡可以将 ip 地址转换为外网地址，并且可以增加对应的端口来识别物理设备的身份

## 协议 (第三层以上才有协议)

- 应用层 http DNS (将网址转换为 IP 地址) DHCP (动态主机配置协议)
- 传输层 tcp(面向连接,三次握手 安全可靠慢) udp(非连接协议 不安全不可靠 快)
- IP 协议 寻址的，ARP 协议(广播的时候)

## TCP 的特点以及组成格式

> tcp 是一个全双工的（单工 半双工 全双工）

- 三次握手和四次断开(缺陷和优点)

  > 三次握手的目的，就是为了建立双向链接 (实现了双方可以建立连接)

  **_连接_**

  1.  我和你发短信吗？
  2.  好的，我可以和你发消息吗(确定和疑问放在一条)
  3.  可以啊

  - 握手的流程

    1. 客户端和服务端分别有一个序列号 seq=0
    2. 客户端的序列号是 0 seq=0 服务端要表示收到了这个数据做应答 ack=客户端 seq+1 并且告诉客户端服务端的 seq 是多少 seq=0
    3. 客户端收到服务端的 ack = 服务端的 seq+1 服务端给客户端的 ack 或作为客户端的 seq

    4. seq=0 2. ack=1 seq=0 3.seq=1 ack=1(两个序号分别是客户端的序号和服务端的序号), 开始发数据， tcp 如果发现对方没有响应，会认为数据丢失了,会进行重新发送

  **_断开_**

  1. 我们分手吧
  2. 我收到了 (女生不能发送立即发起分手的动作), 因为还有一些消息发送中的 ......正在发送其他消息
  3. 我们分手吧 k
  4. 好的 对方确认

  > tcp 的特点就是每次传输一个数据段都增加一个 20 个字节头部(粘包: 把字节小的粘在一起)

- 三次和四次是怎么来的
